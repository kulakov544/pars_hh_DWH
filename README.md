# Анализ вакансий на hh.ru

Данный репозиторий является частью проекта по анализу вакансий с hh.ru.  
Здесь будут размещены данные о строении базы данных.

### Бизнес требование
Нужно узнать какие навыки требуются на рынке вакансий.

### Техническое задание
Получить аналитику по требованиям к соискателям вакансий на сайте hh.ru по IT направлению.

### Решение
1. Построить базу DWH на PostgreSQL.
2. Получить данные о вакансиях с сайта hh.ru
3. Провести первичную обработка данных для загрузки в базу.
4. Загрузить данные в Stage слой DWH.
5. Трансформировать данные для укладки на долговременное хранение.
6. Заполнить справочники и таблицу вакансий в Core слое DWH, с сохранением обновленных записей в таблицу истории.
7. Оркестрация процесса через Prefect.
8. Сделать View и материализацию таблиц в DataMart слое DWH
9. По данным из DataMart построить дашборды в Yandex Data Lens и Power BI


### План DWH
Таблицы слоя Stage:
Слой Stage содержит две таблицы. stage_pars_hh и stage_pars_hh_skill.  
stage_pars_hh основная таблица с данными о вакансии. В неё попадает информация из 
ответа Api HH после небольшой обработки.
stage_pars_hh_skill это навыки указанные в вакансии. Они специально вынесены в отдельную таблицу.
Навыков в одной вакансии может быть много и их надо, либо хранить в неудобном формате, либо загружать 
отдельной таблицей и сразу отправлять в справочник.
![Stage](../pars_hh_DWH/file/stage.png)


Таблицы слоя Core и схема переноса данных:
Таблицы и связи между ними изображены на схеме. Справа на схеме логика работы с 
устаревшими записями. Зеленым выделено то что реализовано в данный момент. В 
будущем планируется реализация третьего варианта работы с устаревшими записями.
![Core](../pars_hh_DWH/file/core.png)

Представление в слое Data Mart:
Этот слой нужен для того, чтобы подготовить данные для предоставления пользователям.
К нему же выдаются права доступа. Чтобы пользователь имел доступ только к тем данным к 
которым должен.
![Data Mart](../pars_hh_DWH/file/data_mart.png)

## Используемые технологии

![PosgreSQL](https://img.shields.io/badge/PosgreSQL-blue?logo=posgres)
![SQL](https://img.shields.io/badge/SQL-yellow?logo=SQL)

